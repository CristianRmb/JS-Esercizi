<html>

<body>
  <div id="container">
    <button type="button" id="fetch-post">Fetch Post</button>
    <button type="button" id="save-post">Save Post on LocalStorage</button>
  </div>
</body>

</html>

<!-- # Browser Storing Data - Exercise 1

Implementare il codice necessario per:

- Recuperare il post presente al seguente url: <https://jsonplaceholder.typicode.com/posts/1> al click del pulsante "Fetch Post"
- Salvare il post sul localStorage al click del pulsante "Save Post on LocalStorage"
- Per svolgere l'esercizio utilizzando Node, bisogna installare la libreria node-fetch, 
  scrivendo nel terminale il seguente comando: npm i node-fetch. -->

<script>
  // code here
  const fetchPost = document.getElementById("fetch-post");
  const savePost = document.getElementById("save-post");

  fetchPost.addEventListener("click", fetchPostFunction)

  async function fetchPostFunction() {
    let promise = await fetch('https://jsonplaceholder.typicode.com/posts/1')
    let obj = await promise.json()
    return obj;
  }

  savePost.addEventListener("click", savePostFunction)

  /* in questo modo scompongo l'ogj e salvo ogni chiave */

  // async function savePostFunction() {
  //   const daSalvare = await fetchPostFunction()
  //   for (let i = 0; i < Object.keys(daSalvare).length; i++) {
  //     localStorage.setItem(`${Object.keys(daSalvare)[i]}`, `${Object.values(daSalvare)[i]}`);
  //   }
  // }

  /* salvo l'obj in formato json */

  async function savePostFunction() {
    const daSalvare = JSON.stringify(await fetchPostFunction())
    localStorage.setItem("Post", daSalvare)
  }

</script>